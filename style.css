:root {
    --glass: rgba(255, 255, 255, 0.1);
    --glass-border: rgba(255, 255, 255, 0.2);
    --accent: #ff4d4d;
    --gold: #d4af37;
    --handwritten: 'Indie Flower', cursive;
    --spotify-font: 'Montserrat', sans-serif;
}

body { margin: 0; font-family: 'Quicksand', sans-serif; color: #fff; background: #000; overflow-x: hidden; }

.christmas-theme { --accent: #ff4d4d; background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), url('https://images.unsplash.com/photo-1482517967863-00e15c9b44be?q=80&w=2070') center/cover fixed; }
.ny-theme { --accent: var(--gold); background: linear-gradient(rgba(0,0,0,0.8), rgba(0,0,0,0.8)), url('https://images.unsplash.com/photo-1467810563316-b5476525c0f9?q=80&w=2069') center/cover fixed; }

.hidden { display: none !important; }

/* CINEMATIC OVERLAY */
.ny-overlay, .reveal-overlay, .login-overlay {
    position: fixed; inset: 0; z-index: 10000; background: rgba(0,0,0,0.95);
    backdrop-filter: blur(25px); display: flex; align-items: center; justify-content: center; text-align: center;
}
.stage { width: 100%; position: absolute; }

/* STARS */
#star-field { position: fixed; inset: 0; pointer-events: none; }
.drifting-star { position: absolute; font-size: 2.5rem; cursor: pointer; pointer-events: auto; }

/* TIME MACHINE */
#ff-month { font-size: 4rem; font-weight: 900; letter-spacing: 12px; font-family: var(--spotify-font); opacity: 0; }
.month-zoom { animation: zoomIn 0.4s ease-out forwards; }
#digital-clock { font-size: clamp(4rem, 15vw, 8rem); font-family: var(--spotify-font); font-weight: 900; margin: 20px 0; }
.midnight-strike { color: var(--gold) !important; text-shadow: 0 0 50px var(--gold); transform: scale(1.15); transition: 0.6s; }

/* 3D ENVELOPE */
.envelope-container { perspective: 1500px; padding-top: 50px; }
.envelope {
    width: 360px; height: 240px; position: relative; background: #e6d3a7; margin: 0 auto;
    box-shadow: 0 30px 60px rgba(0,0,0,0.5); transform-style: preserve-3d; transition: 0.8s;
}
.env-back { position: absolute; inset: 0; background: #cbb88a; z-index: 1; }
.env-front { position: absolute; inset: 0; z-index: 3; background: #e6d3a7; clip-path: polygon(0 40%, 50% 100%, 100% 40%, 100% 100%, 0 100%); }
.env-flap { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: #d4c093; clip-path: polygon(0 0, 100% 0, 50% 50%); transform-origin: top; transition: 0.8s; z-index: 4; }
.envelope.open .env-flap { transform: rotateX(180deg); z-index: 1; }
.letter {
    position: absolute; bottom: 5px; left: 10px; width: calc(100% - 20px); height: 90%;
    background: #fdfaf3; z-index: 2; padding: 25px; transition: 1.2s cubic-bezier(0.19, 1, 0.22, 1);
    box-sizing: border-box; background-image: repeating-linear-gradient(white, white 29px, #eee 29px, #eee 30px);
}
.envelope.open .letter { transform: translateY(-330px); height: 480px; z-index: 10; box-shadow: 0 20px 40px rgba(0,0,0,0.4); }
.paper-lines { height: 100%; text-align: left; color: #222; font-family: var(--handwritten); overflow: hidden; }
.wax-seal { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 60px; height: 60px; background: #b02a2a; border-radius: 50%; z-index: 5; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; }

/* BINDER & MAIN UI */
.main-content { max-width: 1000px; margin: 0 auto; padding: 20px; }
.hero-section { text-align: center; padding: 60px 0; }
.main-title { font-family: 'Dancing Script'; font-size: clamp(3rem, 10vw, 5rem); }
.timer-display { background: var(--glass); padding: 15px 40px; border-radius: 50px; border: 1px solid var(--glass-border); font-family: var(--spotify-font); font-weight: bold; }

.glass-card { background: var(--glass); backdrop-filter: blur(15px); border-radius: 25px; padding: 30px; margin-bottom: 40px; border: 1px solid var(--glass-border); }
.pinned-note {
    background: rgba(255,255,255,0.08); padding: 45px 30px 30px; border-radius: 20px; font-family: var(--handwritten); font-size: 1.8rem;
    position: relative; border: 1px solid var(--glass-border); transform: rotate(-0.5deg);
}
.pinned-note::before { content: '❤️'; position: absolute; top: -20px; left: 50%; transform: translateX(-50%); font-size: 2rem; animation: pulse 2s infinite; }

.binder-wrapper { background: var(--glass); backdrop-filter: blur(15px); border-radius: 30px; border: 1px solid var(--glass-border); display: flex; margin-top: 40px; }
.binder-spine { width: 50px; background: rgba(0,0,0,0.2); display: flex; flex-direction: column; justify-content: space-around; padding: 30px 0; border-radius: 30px 0 0 30px; }
.ring { width: 30px; height: 30px; border: 4px solid #aaa; border-radius: 50%; margin: 0 auto; }
.binder-content { flex: 1; padding: 40px; }

.song-entry { display: grid; grid-template-columns: 1.2fr 1fr; gap: 30px; background: rgba(0,0,0,0.3); padding: 25px; border-radius: 20px; margin-bottom: 40px; border: 1px solid rgba(255,255,255,0.1); }
.music-box { aspect-ratio: 1/1; border-radius: 15px; overflow: hidden; background: #000; }
.favorite-line-box { background: var(--accent); padding: 15px; border-radius: 12px; margin-top: 15px; font-family: var(--spotify-font); font-weight: 900; }

.floating-gift { position: fixed; bottom: 30px; right: 30px; font-size: 3.5rem; cursor: pointer; z-index: 999; filter: drop-shadow(0 0 10px var(--accent)); }

@keyframes zoomIn { from { opacity: 0; transform: scale(0.5); filter: blur(10px); } to { opacity: 1; transform: scale(1.1); filter: blur(0); } }
@keyframes pulse { 0%, 100% { transform: translateX(-50%) scale(1); } 50% { transform: translateX(-50%) scale(1.2); } }
@keyframes fall { to { transform: translateY(110vh) rotate(360deg); } }

@media (max-width: 768px) { .song-entry { grid-template-columns: 1fr; } .binder-spine { display: none; } }
