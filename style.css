:root {
    --glass: rgba(255, 255, 255, 0.1);
    --glass-border: rgba(255, 255, 255, 0.2);
    --accent: #ff4d4d;
    --gold: #d4af37;
    --handwritten: 'Indie Flower', cursive;
}

body {
    margin: 0; font-family: 'Quicksand', sans-serif; color: #fff;
    background: #0a0a0c; overflow-x: hidden;
}

.christmas-theme { --accent: #ff4d4d; background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), url('https://images.unsplash.com/photo-1482517967863-00e15c9b44be?q=80&w=2070') center/cover fixed; }
.ny-theme { --accent: var(--gold); background: linear-gradient(rgba(0,0,0,0.8), rgba(0,0,0,0.8)), url('https://images.unsplash.com/photo-1467810563316-b5476525c0f9?q=80&w=2069') center/cover fixed; }

.hidden { display: none !important; }

/* PREMIUM OVERLAY */
.ny-overlay {
    position: fixed; inset: 0; z-index: 10000;
    background: radial-gradient(circle at center, #0e0e1a 0%, #000 100%);
    display: flex; align-items: center; justify-content: center;
}

.stage { width: 100%; text-align: center; }

/* TIME MACHINE */
#ff-month { font-size: 4rem; font-weight: 900; letter-spacing: 12px; font-family: 'Montserrat'; opacity: 0; }
.month-zoom { animation: zoomBlur 0.4s ease-out forwards; }

#digital-clock { font-size: clamp(4rem, 15vw, 8rem); font-weight: 900; margin: 20px 0; font-family: 'Montserrat'; }
.midnight-strike { color: var(--gold) !important; text-shadow: 0 0 50px var(--gold); transform: scale(1.1); transition: 0.5s; }

/* ENVELOPE & LETTER */
.envelope-container { perspective: 1500px; }
.envelope {
    width: 360px; height: 240px; position: relative; background: #e6d3a7; margin: 0 auto;
    box-shadow: 0 30px 60px rgba(0,0,0,0.5); transform-style: preserve-3d;
}
.env-flap {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    background: #d4c093; clip-path: polygon(0 0, 100% 0, 50% 50%);
    transform-origin: top; transition: 0.8s; z-index: 4;
}
.env-front {
    position: absolute; inset: 0; z-index: 3; background: #e6d3a7;
    clip-path: polygon(0 40%, 50% 100%, 100% 40%, 100% 100%, 0 100%);
}
.letter {
    position: absolute; bottom: 5px; left: 10px; width: calc(100% - 20px);
    height: 90%; background: #fdfaf3; z-index: 2; padding: 25px;
    box-sizing: border-box; transition: 1.2s cubic-bezier(.19, 1, .22, 1);
}
.envelope.open .env-flap { transform: rotateX(180deg); z-index: 1; }
.envelope.open .letter { transform: translateY(-330px); height: 480px; z-index: 10; box-shadow: 0 20px 40px rgba(0,0,0,0.4); }

.paper-lines {
    height: 100%; width: 100%; text-align: left; font-family: var(--handwritten); color: #222;
    background-image: repeating-linear-gradient(white, white 29px, #eee 29px, #eee 30px);
    overflow-y: auto;
}

.wax-seal {
    position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
    width: 60px; height: 60px; background: #b02a2a; border-radius: 50%;
    display: flex; align-items: center; justify-content: center; z-index: 5; cursor: pointer;
}

/* MAIN UI ELEMENTS */
.main-content { max-width: 900px; margin: 0 auto; padding: 20px; }
.hero-section { text-align: center; padding: 60px 0; }
.main-title { font-family: 'Dancing Script'; font-size: 3.5rem; margin: 0; }
.memory-pill { background: var(--accent); color: white; border: none; padding: 10px 20px; border-radius: 50px; cursor: pointer; font-weight: bold; margin: 5px; }

.glass-card { background: var(--glass); backdrop-filter: blur(15px); border-radius: 20px; padding: 25px; margin-bottom: 30px; border: 1px solid var(--glass-border); }
.pinned-note { background: rgba(255,255,255,0.08); padding: 40px 20px 20px; border-radius: 15px; font-family: var(--handwritten); font-size: 1.5rem; position: relative; border: 1px solid var(--glass-border); }
.pinned-note::before { content: '❤️'; position: absolute; top: -15px; left: 50%; transform: translateX(-50%); animation: pulse 2s infinite; }

.binder-wrapper { display: flex; background: var(--glass); border-radius: 20px; border: 1px solid var(--glass-border); }
.binder-spine { width: 45px; background: rgba(0,0,0,0.2); display: flex; flex-direction: column; justify-content: space-around; padding: 20px 0; }
.ring { width: 25px; height: 25px; border: 3px solid #ccc; border-radius: 50%; margin: 0 auto; }
.binder-content { flex: 1; padding: 25px; }
.song-entry { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; background: rgba(0,0,0,0.2); padding: 15px; border-radius: 15px; margin-bottom: 20px; }
.music-box { aspect-ratio: 1/1; border-radius: 10px; overflow: hidden; }

/* ANIMATIONS */
@keyframes zoomBlur { from { opacity: 0; transform: scale(0.5); filter: blur(10px); } to { opacity: 1; transform: scale(1.2); filter: blur(0); } }
@keyframes pulse { 0%, 100% { transform: translateX(-50%) scale(1); } 50% { transform: translateX(-50%) scale(1.2); } }
@keyframes fall { to { transform: translateY(110vh) rotate(360deg); } }

@media (max-width: 768px) { .song-entry { grid-template-columns: 1fr; } }
